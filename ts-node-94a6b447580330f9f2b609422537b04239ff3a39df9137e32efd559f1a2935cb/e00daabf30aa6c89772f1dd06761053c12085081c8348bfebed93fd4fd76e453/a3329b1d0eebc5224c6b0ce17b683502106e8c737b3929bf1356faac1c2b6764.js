"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const http = require("http");
const socketIo = require("socket.io");
class SocketUtil {
    constructor() {
        this.listens = [];
    }
    getServerSocketIo(exp) {
        if (!this.server) {
            this.server = http.createServer(exp); //Criando servidor HTTP
            this.io = socketIo(this.server); // Criando Servidor do Socket.io
        }
        this.initSockets();
        return this.server;
    }
    addListen(event, action) {
        this.listens.push({
            event: event,
            action: action
        });
    }
    emit(event, object) {
        if (this.io) {
            this.io.emit(event, object);
        }
    }
    initSockets() {
        this.io.on('connect', (socket) => {
            this.listens.forEach((listen, index, list) => {
                socket.on(listen.event, listen.action);
            });
            socket.on('disconnect', () => {
            });
        });
    }
}
exports.default = new SocketUtil();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL3Zhci93d3cvUFNQLWJhY2tlbmQvc3JjL3V0aWwvU29ja2V0VXRpbC50cyIsInNvdXJjZXMiOlsiL3Zhci93d3cvUFNQLWJhY2tlbmQvc3JjL3V0aWwvU29ja2V0VXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQUE4QjtBQUU5QixzQ0FBc0M7QUFFdEM7SUFNSTtRQUZRLFlBQU8sR0FBRyxFQUFFLENBQUM7SUFFUCxDQUFDO0lBRVIsaUJBQWlCLENBQUMsR0FBd0I7UUFDN0MsRUFBRSxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQztZQUNiLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLHVCQUF1QjtZQUM3RCxJQUFJLENBQUMsRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQSxnQ0FBZ0M7UUFDcEUsQ0FBQztRQUNELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRU0sU0FBUyxDQUFDLEtBQVksRUFBRSxNQUFXO1FBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ2QsS0FBSyxFQUFFLEtBQUs7WUFDWixNQUFNLEVBQUUsTUFBTTtTQUNqQixDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ00sSUFBSSxDQUFDLEtBQVksRUFBRSxNQUFjO1FBQ3BDLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQSxDQUFDO1lBQ1IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2hDLENBQUM7SUFDTCxDQUFDO0lBRU8sV0FBVztRQUNmLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLE1BQVc7WUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUk7Z0JBQ3pDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdkMsQ0FBQyxDQUFDLENBQUM7WUFDUCxNQUFNLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRTtZQUN4QixDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBRUQsa0JBQWUsSUFBSSxVQUFVLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGh0dHAgZnJvbSAgXCJodHRwXCI7XG5pbXBvcnQgKiBhcyBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgKiBhcyBzb2NrZXRJbyBmcm9tIFwic29ja2V0LmlvXCI7XG5cbmNsYXNzIFNvY2tldFV0aWx7XG4gICAgcHVibGljIGlvOiBTb2NrZXRJTy5TZXJ2ZXI7XG4gICAgcHVibGljIHNvY2tldDogU29ja2V0SU8uU29ja2V0O1xuICAgIHB1YmxpYyBzZXJ2ZXI6IGh0dHAuU2VydmVyO1xuICAgIHByaXZhdGUgbGlzdGVucyA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoKXt9XG4gICAgXG4gICAgcHVibGljIGdldFNlcnZlclNvY2tldElvKGV4cDogZXhwcmVzcy5BcHBsaWNhdGlvbik6IGh0dHAuU2VydmVyIHtcbiAgICAgICAgaWYoIXRoaXMuc2VydmVyKXtcbiAgICAgICAgICAgIHRoaXMuc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoZXhwKTsgLy9DcmlhbmRvIHNlcnZpZG9yIEhUVFBcbiAgICAgICAgICAgIHRoaXMuaW8gPSBzb2NrZXRJbyh0aGlzLnNlcnZlcik7Ly8gQ3JpYW5kbyBTZXJ2aWRvciBkbyBTb2NrZXQuaW9cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRTb2NrZXRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZlcjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGFkZExpc3RlbihldmVudDpzdHJpbmcsIGFjdGlvbjogYW55KXtcbiAgICAgICAgdGhpcy5saXN0ZW5zLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBlbWl0KGV2ZW50OnN0cmluZywgb2JqZWN0OiBPYmplY3Qpe1xuICAgICAgICBpZih0aGlzLmlvKXtcbiAgICAgICAgICAgIHRoaXMuaW8uZW1pdChldmVudCwgb2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRTb2NrZXRzKCl7XG4gICAgICAgIHRoaXMuaW8ub24oJ2Nvbm5lY3QnLCAoc29ja2V0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbnMuZm9yRWFjaCgobGlzdGVuLCBpbmRleCwgbGlzdCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbihsaXN0ZW4uZXZlbnQsIGxpc3Rlbi5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBTb2NrZXRVdGlsKCk7Il19